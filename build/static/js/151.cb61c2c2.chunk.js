"use strict";(self.webpackChunkInteractive_Dashboard=self.webpackChunkInteractive_Dashboard||[]).push([[151],{1151:(t,e,o)=>{o.r(e),o.d(e,{default:()=>E});var r=o(7818),n=o(899),s=o(8102),a=o(9828),i=o(1200),l=o(1104),c=o(7289),d=o(9950),h=o(6187),p=o(5298),g=o(8089),m=o(4745),x=o(4919),u=o(2498);const f=function(t,e){return{data:{labels:t,datasets:[{label:e.label,tension:.4,borderWidth:0,borderRadius:4,borderSkipped:!1,backgroundColor:"rgba(255, 255, 255, 0.8)",data:e.data,maxBarThickness:6}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},interaction:{intersect:!1,mode:"index"},scales:{y:{grid:{drawBorder:!1,display:!0,drawOnChartArea:!0,drawTicks:!1,borderDash:[5,5],color:"rgba(255, 255, 255, .2)"},ticks:{suggestedMin:0,suggestedMax:500,beginAtZero:!0,padding:10,font:{size:14,weight:300,family:"Roboto",style:"normal",lineHeight:2},color:"#fff"}},x:{grid:{drawBorder:!1,display:!0,drawOnChartArea:!0,drawTicks:!1,borderDash:[5,5],color:"rgba(255, 255, 255, .2)"},ticks:{display:!0,color:"#f8f9fa",padding:10,font:{size:14,weight:300,family:"Roboto",style:"normal",lineHeight:2}}}}}}};var y=o(4414);function b(t){let{color:e,title:o,description:r,date:n,chart:a}=t;const{data:i,options:l}=f(a.labels||[],a.datasets||{});return(0,y.jsx)(g.A,{sx:{height:"100%"},children:(0,y.jsxs)(s.A,{padding:"1rem",children:[(0,d.useMemo)((()=>(0,y.jsx)(s.A,{variant:"gradient",bgColor:e,borderRadius:"lg",coloredShadow:e,py:2,pr:.5,mt:-5,height:"12.5rem",children:(0,y.jsx)(h.yP,{data:i,options:l,redraw:!0})})),[e,a]),(0,y.jsxs)(s.A,{pt:3,pb:1,px:1,children:[(0,y.jsx)(u.A,{variant:"h6",textTransform:"capitalize",children:o}),(0,y.jsx)(u.A,{component:"div",variant:"button",color:"text",fontWeight:"light",children:r}),(0,y.jsx)(m.A,{}),(0,y.jsxs)(s.A,{display:"flex",alignItems:"center",children:[(0,y.jsx)(u.A,{variant:"button",color:"text",lineHeight:1,sx:{mt:.15,mr:.5},children:(0,y.jsx)(x.A,{children:"schedule"})}),(0,y.jsx)(u.A,{variant:"button",color:"text",fontWeight:"light",children:n})]})]})]})})}p.t1.register(p.PP,p.kc,p.E8,p.hE,p.m_,p.s$),b.defaultProps={color:"info",description:""};const j=b;const A=function(t,e){return{data:{labels:t,datasets:[{label:e.label,tension:0,pointRadius:5,pointBorderColor:"transparent",pointBackgroundColor:"rgba(255, 255, 255, .8)",borderColor:"rgba(255, 255, 255, .8)",borderWidth:4,backgroundColor:"transparent",fill:!0,data:e.data,maxBarThickness:6}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},interaction:{intersect:!1,mode:"index"},scales:{y:{grid:{drawBorder:!1,display:!0,drawOnChartArea:!0,drawTicks:!1,borderDash:[5,5],color:"rgba(255, 255, 255, .2)"},ticks:{display:!0,color:"#f8f9fa",padding:10,font:{size:14,weight:300,family:"Roboto",style:"normal",lineHeight:2}}},x:{grid:{drawBorder:!1,display:!1,drawOnChartArea:!1,drawTicks:!1,borderDash:[5,5]},ticks:{display:!0,color:"#f8f9fa",padding:10,font:{size:14,weight:300,family:"Roboto",style:"normal",lineHeight:2}}}}}}};function v(t){let{color:e,title:o,description:r,date:n,chart:a}=t;const{data:i,options:l}=A(a.labels||[],a.datasets||{});return(0,y.jsx)(g.A,{sx:{height:"100%"},children:(0,y.jsxs)(s.A,{padding:"1rem",children:[(0,d.useMemo)((()=>(0,y.jsx)(s.A,{variant:"gradient",bgColor:e,borderRadius:"lg",coloredShadow:e,py:2,pr:.5,mt:-5,height:"12.5rem",children:(0,y.jsx)(h.N1,{data:i,options:l,redraw:!0})})),[a,e]),(0,y.jsxs)(s.A,{pt:3,pb:1,px:1,children:[(0,y.jsx)(u.A,{variant:"h6",textTransform:"capitalize",children:o}),(0,y.jsx)(u.A,{component:"div",variant:"button",color:"text",fontWeight:"light",children:r}),(0,y.jsx)(m.A,{}),(0,y.jsxs)(s.A,{display:"flex",alignItems:"center",children:[(0,y.jsx)(u.A,{variant:"button",color:"text",lineHeight:1,sx:{mt:.15,mr:.5},children:(0,y.jsx)(x.A,{children:"schedule"})}),(0,y.jsx)(u.A,{variant:"button",color:"text",fontWeight:"light",children:n})]})]})]})})}p.t1.register(p.PP,p.kc,p.FN,p.No,p.hE,p.m_,p.s$,p.dN),v.defaultProps={color:"info",description:""};const w=v;var k=o(1065),S=o(4097),C=o(3657),D=o(4174),O=o(4306);const M=t=>{let{direction:e,locations:o}=t;const[r,n]=(0,d.useState)([]);(0,d.useEffect)((()=>{n(o)}),[o]);const s=r.length;return(0,y.jsx)(y.Fragment,{children:0!=s?(0,y.jsx)(C.VectorMap,{map:D,zoomOnScroll:!1,zoomButtons:!1,markersSelectable:!0,backgroundColor:"transparent",markers:r,regionStyle:{initial:{fill:"#dee2e7","fill-opacity":1,stroke:"none","stroke-width":0,"stroke-opacity":0}},markerStyle:{initial:{fill:"#e91e63",stroke:"#ffffff","stroke-width":5,"stroke-opacity":.5,r:7},hover:{fill:"#e91e63",stroke:"#ffffff","stroke-width":5,"stroke-opacity":.5},selected:{fill:"##0d67ef",stroke:"#ffffff","stroke-width":5,"stroke-opacity":.5}},style:{marginTop:"-1.5rem",height:"300px"},onRegionTipShow:(t,o)=>{const r=o.html(),n=O.A[r],s="rtl"===e?n:r;o.html(`\n            <div>\n              <strong>${s}</strong><br>\n            </div>\n          `)},onMarkerTipShow:(t,o)=>{const r=o.html(),n=O.A[r],s="rtl"===e?n:r;o.html(`\n            <div>\n              <strong>${s}</strong><br>\n            </div>\n          `)}}):(0,y.jsx)(y.Fragment,{})})};var T=o(300),B=o(7199);const P=t=>{let{tableData:e}=t;const{t:o}=(0,r.Bd)(),a=(0,T.d4)((t=>t.orphanDonor.orphanDonors)),i=(0,T.d4)((t=>t.language.direction)),[l,c]=(0,d.useState)([]),[h,p]=(0,d.useState)([]);return(0,d.useEffect)((()=>{const t=a.map((t=>t.country));c([...new Set(t)])}),[a]),(0,d.useEffect)((()=>{if(l.length>0){const t=l.map((t=>{const e=B.H[t];return e?{name:t,latLng:e}:null})).filter(Boolean),e=Array.from(new Set(t.map((t=>JSON.stringify(t.latLng))))).map((t=>JSON.parse(t)));p(e)}}),[l]),(0,y.jsxs)(g.A,{sx:{width:"100%",height:"20%"},children:[(0,y.jsxs)(s.A,{display:"flex",children:[(0,y.jsx)(s.A,{display:"flex",justifyContent:"center",alignItems:"center",width:"4rem",height:"4rem",variant:"gradient",bgColor:"success",color:"white",shadow:"md",borderRadius:"xl",ml:3,mt:-2,children:(0,y.jsx)(k.A,{})}),(0,y.jsx)(u.A,{variant:"h6",sx:{mt:2,mb:1,ml:2},children:o("analyticsByCountry")})]}),(0,y.jsx)(s.A,{p:2,children:(0,y.jsxs)(n.Ay,{container:!0,children:[(0,y.jsx)(n.Ay,{item:!0,xs:12,md:12,lg:6,children:(0,y.jsx)(S.A,{rows:e,shadow:!0})}),(0,y.jsx)(n.Ay,{item:!0,xs:12,md:12,lg:6,sx:{mt:{xs:5,lg:0}},children:(0,y.jsx)(M,{direction:i,locations:h})})]})})]})},R=()=>{const t=[],e=new Date,o=new Date(e.getFullYear(),e.getMonth()+1,1);for(let r=0;r<12;r++){const e=new Date(o.getFullYear(),o.getMonth()-r,1),n=`${e.getUTCFullYear()}-${String(e.getUTCMonth()+1).padStart(2,"0")}`;t.unshift(n)}return t};var N=o(9664);const E=function(){const{t:t}=(0,r.Bd)(),{totalMoneySponsor:e,totalOrphans:o,totalCountriesOfOrphans:d,totalActiveSponsors:h}=(()=>{const t=(0,T.d4)((t=>t.orphanDonor.orphanDonors));let e=0;const o=t.length,r=new Set;let n=0;t.forEach((t=>{e+=t.sponsorCost||0,r.add(t.country),t.active&&(n+=1)}));const s=r.size;return{totalMoneySponsor:e.toLocaleString("en-US"),totalOrphans:o,totalCountriesOfOrphans:s,totalActiveSponsors:n}})(),p=(()=>{const t=(0,T.d4)((t=>t.orphanDonor.orphanDonors)),{t:e}=(0,r.Bd)(),o={};return t.forEach((t=>{const e=t.sponsorType,r=t.sponsorCost;e?void 0===r||null===r||isNaN(r)?console.error("Invalid sponsor cost value for orphan:",t):(o[e]||(o[e]=0),o[e]+=r):console.error("Sponsor type missing for orphan:",t)})),{labels:Object.keys(o),datasets:{label:e("totalMoneyBySponsorshipType"),data:Object.values(o)}}})(),g=(()=>{const t=(0,T.d4)((t=>t.orphanDonor.orphanDonors)),{t:e}=(0,r.Bd)(),o={},n=R();return t.forEach((t=>{const e=t.startingFrom;if(!e)return void console.error("Missing startingFrom date for orphan:",t);const r=new Date(e);if(isNaN(r.getTime()))return void console.error("Invalid startingFrom date encountered:",e);const s=`${r.getUTCFullYear()}-${String(r.getUTCMonth()+1).padStart(2,"0")}`;n.includes(s)&&(o[s]||(o[s]=0),o[s]+=1)})),{labels:n.map((t=>{const[e,o]=t.split("-");return new Date(Date.UTC(e,o-1)).toLocaleString("default",{month:"short"})})),datasets:{label:e("totalSponsoredOrphansPerMonth"),data:n.map((t=>o[t]||0))}}})(),m=(()=>{const t=(0,T.d4)((t=>t.orphanDonor.orphanDonors)),{t:e}=(0,r.Bd)(),o={},n=e("country"),s=e("totalOrphansPerCountry"),a=e("totalMoneySponsoringPerCountry");return t.forEach((t=>{const e=t.country;if(!e)return void console.error("Missing country name for orphan:",t);const r=N.a[e];if(!r)return void console.log("Invalid country name or code:",e);const i=t.sponsorCost||0,l=`https://flagcdn.com/64x48/${r}.png`;o[r]||(o[r]={[n]:[l,e],[s]:0,[a]:0}),o[r][s]+=1,o[r][a]+=i})),Object.keys(o).map((t=>({[n]:o[t][n],[s]:o[t][s],[a]:o[t][a].toLocaleString("en-US")})))})();return(0,y.jsxs)(i.A,{children:[(0,y.jsx)(l.A,{}),(0,y.jsxs)(s.A,{py:3,children:[(0,y.jsx)(s.A,{mt:1.5,mb:6,children:(0,y.jsxs)(n.Ay,{container:!0,spacing:3,children:[(0,y.jsx)(n.Ay,{item:!0,xs:12,md:6,lg:3,children:(0,y.jsx)(s.A,{mb:1.5,children:(0,y.jsx)(a.A,{color:"dark",icon:"money",title:t("totalMoneyOfSponsor"),count:e,percentage:{color:"success",amount:"",label:""}})})}),(0,y.jsx)(n.Ay,{item:!0,xs:12,md:6,lg:3,children:(0,y.jsx)(s.A,{mb:1.5,children:(0,y.jsx)(a.A,{icon:"assessment",title:t("totalNumberOfOrphans"),count:o,percentage:{color:"success",amount:"",label:""}})})}),(0,y.jsx)(n.Ay,{item:!0,xs:12,md:6,lg:3,children:(0,y.jsx)(s.A,{mb:1.5,children:(0,y.jsx)(a.A,{color:"success",icon:"language",title:t("totalCountriesOfOrphans"),count:d,percentage:{color:"success",amount:"",label:""}})})}),(0,y.jsx)(n.Ay,{item:!0,xs:12,md:6,lg:3,children:(0,y.jsx)(s.A,{mb:1.5,children:(0,y.jsx)(a.A,{color:"primary",icon:"check_circle",title:t("totalActiveSponsors"),count:h,percentage:{color:"success",amount:"",label:""}})})})]})}),(0,y.jsx)(s.A,{mb:6,children:(0,y.jsx)(n.Ay,{container:!0,children:(0,y.jsx)(P,{tableData:m})})}),(0,y.jsx)(s.A,{mb:6,children:(0,y.jsxs)(n.Ay,{container:!0,spacing:3,children:[(0,y.jsx)(n.Ay,{item:!0,xs:12,md:6,lg:6,children:(0,y.jsx)(s.A,{mb:3,children:(0,y.jsx)(j,{color:"info",title:t("totalMoneyBySponsorshipType"),description:t("totalMoneyBySponsorshipTypeDescription"),date:"",chart:p})})}),(0,y.jsx)(n.Ay,{item:!0,xs:12,md:6,lg:6,children:(0,y.jsx)(s.A,{mb:3,children:(0,y.jsx)(w,{color:"success",title:t("totalSponsoredOrphansPerMonth"),description:t("totalSponsoredOrphansPerMonthDescription"),date:"",chart:g})})})]})})]}),(0,y.jsx)(c.A,{})]})}}}]);